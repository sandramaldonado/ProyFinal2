"use strict";(self.webpackChunklanding_master_sales_frontend=self.webpackChunklanding_master_sales_frontend||[]).push([[380],{5428:(T,x,s)=>{s.d(x,{h:()=>_});var t=s(4650),g=s(529),y=s(5625),f=s(262),O=s(2843),p=s(7065);let b=(()=>{class c{constructor(i){this.httpClient=i,this.apiUrl=`${p.N.MovilNumberListApiUrl}`,this.headers=new g.WM,this.httpOptions={}}getMovilList(i,r){return this.httpClient.post(`${this.apiUrl}`,i,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+r}}).pipe((0,y.X)(1),(0,f.K)(this.handleError))}handleError(i){return i.error instanceof ErrorEvent?console.error("An error occurred:",i.error.message):console.error(`Backend returned code ${i.status}, body was: ${i.error}`),(0,O._)("Something bad happened; please try again later.")}}return c.\u0275fac=function(i){return new(i||c)(t.LFG(g.eN))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var I=s(3063),D=s(4527),v=s(4006),S=s(8423),C=s(6895),L=s(3546),w=s(1948),E=s(42);function d(c,u){if(1&c){const i=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"mat-radio-button",13),t.NdJ("change",function(n){t.CHM(i);const o=t.oxw(2);return t.KtG(o.radioChange(n))}),t.TgZ(3,"span"),t._uU(4),t.qZA()()()()}if(2&c){const i=u.$implicit;t.xp6(1),t.Akn(i.style),t.Tol(i.description),t.xp6(1),t.Q6J("value",i.value)("checked",i.checked),t.xp6(2),t.hij("\xa0",i.name,"")}}function m(c,u){if(1&c){const i=t.EpF();t.TgZ(0,"div",11)(1,"div",14)(2,"a",15),t.NdJ("click",function(){t.CHM(i);const n=t.oxw(2);return t.KtG(n.clickme())}),t._uU(3," Mas opciones.."),t.qZA()()()}}function h(c,u){if(1&c){const i=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"section",4)(3,"h3"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"mat-card")(8,"mat-card-content")(9,"form",5)(10,"div")(11,"div",6),t.YNc(12,d,5,7,"div",7),t.YNc(13,m,4,0,"div",8),t.qZA()(),t.TgZ(14,"div",9)(15,"app-button",10),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.next())}),t.qZA()()()()()()()()}if(2&c){const i=t.oxw();t.xp6(4),t.Oqu(i.title),t.xp6(2),t.Oqu(i.message),t.xp6(6),t.Q6J("ngForOf",i.linesList),t.xp6(1),t.Q6J("ngIf",5===i.limitLine),t.xp6(2),t.Q6J("content","Continuar")}}let _=(()=>{class c{constructor(i,r,n,o,e){this.movilListService=i,this.webstoreService=r,this.ordersService=n,this.formBuilder=o,this.spinnerService=e,this.linesList=[],this.internetList=[],this.tvList=[],this.movilState=!1,this.internetState=!1,this.entertainmentState=!1,this.movilLine="",this.wanLine="",this.tvLine="",this.limitLine=5,this.movilCounter=0,this.nextMovilListStep=new t.vpe,this.title="Elige tu N\xfamero",this.message="Te damos algunas opciones de l\xedneas telef\xf3nicas para que puedas tener tu nuevo plan con un n\xfamero telef\xf3nico que te agrade.",this.visited=!1,this.key=sessionStorage.getItem("key"),this.orderId=this.webstoreService.getDataInSession("orderMainId"),this.userId=this.webstoreService.getDataInSession("userId")}ngOnInit(){this.spinnerService.show(),setTimeout(()=>{this.spinnerService.hide()},1e4),this.armadoJsonScoring(),this.searchList()}armadoJsonScoring(){this.planComposition=this.webstoreService.getPlanComposition(),this.planList=this.planComposition?.planList,console.log(this.planComposition),console.log(this.planList),this.productTypeCode=[];for(let i=0;i<this.planList.length;i++)this.productTypeCode.push(this.planList[i].consumptionEntityType);this.planService=JSON.stringify({userCode:"14",ceTypeCodeList:this.productTypeCode,processId:this.orderId})}searchList(){let i="",r="",n="";this.listagroup=[],this.movilListService.getMovilList(this.planService,this.key).subscribe(o=>{if(this.numberList=o,console.log(this.numberList),null!=this.numberList.data.data.movil&&(i=this.numberList.data.data.movil),i.length>0){this.movilState=!0,this.listagroup.push("movil_control");for(let e=0;e<this.limitLine;e++)this.movilCounter=e,e<this.limitLine&&(0==e?(this.movilLine=i[e],this.linesList.push({id:e.toString(),name:i[e],value:i[e],description:"alert alert-info divOption",style:"background-color: #AC99CE; color: white; border: 2px solid #5C349D; border-radius:15px;",checked:!0})):this.linesList.push({id:e.toString(),name:i[e],value:i[e],description:"alert alert-secondary divOption",style:"background-color: #F1F1F1; color: black; border-radius:15px;",checked:!1}))}null!=this.numberList.data.data.ifixed&&(r=this.numberList.data.data.ifixed),null!=this.numberList.data.data.tv&&(n=this.numberList.data.data.tv),console.log(r),r.length>0&&(this.internetState=!0,this.wanLine=r[0]),console.log(n),n.length>0&&(this.entertainmentState=!0,this.tvLine=n[0]),""==this.movilLine&&this.next()},o=>{console.log(o)})}next(){let i={},r={},n={},o={};""!=this.movilLine&&(i={movil:[this.movilLine]}),""!=this.wanLine&&(r={ifixed:[this.wanLine]}),""!=this.tvLine&&(n={tv:[this.tvLine]}),o=Object.assign(i,r,n);let e=JSON.stringify({data:{transactionId:this.numberList.data.transactionId,data:o}});this.webstoreService.saveMovilListinformation(e),this.visited=!0,this.registerAactivation(o),this.nextMovilListStep.emit(!0)}radioChange(i){var r=i.source.value;const n=this.numberList.data.data.movil;this.linesList=[],this.movilLine=i.source.value;for(let o=0;o<this.limitLine;o++)this.linesList.push(r==n[o]?{id:o.toString(),name:n[o],value:n[o],description:"alert alert-info divOption",style:"background-color: #AC99CE; color: white; border: 2px solid #5C349D; border-radius:15px;",checked:!0}:{id:o.toString(),name:n[o],value:n[o],description:"alert alert-secondary divOption",style:"background-color: #F1F1F1; color: black; border-radius:15px;",checked:!1})}clickme(){this.limitLine=10,this.linesList=[];const i=this.numberList.data.data.movil;if(i.length>0){this.movilState=!0,this.listagroup.push("movil_control");for(let r=0;r<i.length;r++)r<this.limitLine&&this.linesList.push(0==r?{id:r.toString(),name:i[r],value:i[r],description:"alert alert-info divOption",style:"background-color: #AC99CE; color: white; border: 2px solid #5C349D; border-radius:15px;",checked:!0}:{id:r.toString(),name:i[r],value:i[r],description:"alert alert-secondary divOption",style:"background-color: #F1F1F1; color: black; border-radius:15px;",checked:!1})}}registerAactivation(i){if(console.log(i),!i)return;const r=this.webstoreService.getDataInSession("addressData");let n,o=0;r&&r.forEach(a=>{a.selected&&(n=a),o=n?.addressId});let e=[];i.movil&&i.movil.length>0&&e.push({planType:"MOVIL",serviceIdentifier:i.movil[0]}),i.ifixed&&i.ifixed.length>0&&e.push({planType:"IFIXED",serviceIdentifier:i.ifixed[0],address:{addressId:o,addressTypeCode:"INS_ADDR"}}),i.tv&&i.tv.length>0&&e.push({planType:"TV",serviceIdentifier:i.tv[0]});const l={orderId:this.webstoreService.getDataInSession("orderMainId"),sequence:5,userId:this.webstoreService.getDataInSession("userId"),microFrontendId:"activation-data-microfront-app",microFrontendData:JSON.stringify(e),statusCode:"INI"};this.ordersService.registerOrderView(l,this.webstoreService.getDataInSession("token")).subscribe(a=>{console.log(a)})}}return c.\u0275fac=function(i){return new(i||c)(t.Y36(b),t.Y36(I.f),t.Y36(D.N),t.Y36(v.qu),t.Y36(S.t2))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-movil-list"]],outputs:{nextMovilListStep:"nextMovilListStep"},decls:2,vars:2,consts:[["class","container",4,"ngIf"],["bdColor","rgba(51, 51, 51, 0.8)","size","large","color","#D6F084","type","ball-8bits",3,"fullScreen"],[1,"container"],[1,"row","pb-3"],[1,"section-body","col-12","py-3"],["novalidate","","id","validationForm",1,"form",2,"background-color","white"],[1,"row"],["class","col-6 col-md-6 col-sm-6",4,"ngFor","ngForOf"],["class","col-6 col-md-6 col-sm-6",4,"ngIf"],[1,"text-center"],[3,"content","click"],[1,"col-6","col-md-6","col-sm-6"],["role","alert"],["name","movil",3,"value","checked","change"],["role","alert",1,"alert","alert-light","divOption",2,"text-align","center"],["href","javascript: void(0);",1,"linkMore",3,"click"]],template:function(i,r){1&i&&(t.YNc(0,h,16,5,"div",0),t._UZ(1,"ngx-spinner",1)),2&i&&(t.Q6J("ngIf",r.movilState),t.xp6(1),t.Q6J("fullScreen",!1))},dependencies:[C.sg,C.O5,v._Y,v.JL,v.F,L.a8,L.dn,w.U0,E.r,S.Ro],styles:["mat-card-header[_ngcontent-%COMP%]   .title-1[_ngcontent-%COMP%]{font-size:2.5vh;text-align:left;color:purple;font-family:MUSEO900-REGULAR;margin:0}mat-card-header[_ngcontent-%COMP%]   .title-2[_ngcontent-%COMP%]{font-size:1.8vh;text-align:left;color:#000;font-family:MUSEO600-REGULAR}mat-card-title[_ngcontent-%COMP%]{margin-bottom:.5vh}.mat-icon-button[_ngcontent-%COMP%]{width:4vh!important;height:auto!important;margin-top:-6px;margin-right:-3px}mat-card-content[_ngcontent-%COMP%]{background:#F0F0F0;color:purple;border-radius:0 0 25px 25px}.link-back[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:right;font-weight:700;text-decoration:none;color:#b302a7}.mat-card[_ngcontent-%COMP%]{padding:10px!important;width:100%;color:#7b7b7b}.section-body[_ngcontent-%COMP%]{background:white}mat-form-field[_ngcontent-%COMP%]{width:100%}.divOption[_ngcontent-%COMP%]{margin:5px}.linkMore[_ngcontent-%COMP%]{text-align:right;font-weight:700;text-decoration:none;color:#00008b}  .mat-radio-button.mat-accent .mat-radio-ripple .mat-ripple-element{background-color:#fff!important;border-color:#fff!important;border-radius:8px}  .mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#5c339d!important;border-color:#fff!important;border-radius:8px}  .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{background-color:#fff!important;border-color:#fff!important;border-radius:8px}"]}),c})()},5380:(T,x,s)=>{s.r(x),s.d(x,{MovilListModule:()=>E});var t=s(6895),g=s(3060),y=s(5428),f=s(4650);const O=[{path:"",component:y.h}];let p=(()=>{class d{}return d.\u0275fac=function(h){return new(h||d)},d.\u0275mod=f.oAB({type:d}),d.\u0275inj=f.cJS({imports:[g.Bz.forChild(O),g.Bz]}),d})();var b=s(3720),I=s(1948),D=s(4859),v=s(4006),S=s(3546),C=s(4466),L=s(9336),w=s(8423);let E=(()=>{class d{}return d.\u0275fac=function(h){return new(h||d)},d.\u0275mod=f.oAB({type:d}),d.\u0275inj=f.cJS({imports:[t.ez,p,b.O,v.u5,v.UX,S.QW,D.ot,I.Fk,C.m,L.zB,w.ef]}),d})()},8423:(T,x,s)=>{s.d(x,{Ro:()=>i,ef:()=>r,t2:()=>_});var t=s(4650),g=s(1135),y=s(7579),f=s(9300),O=s(2722),p=s(7340),b=s(6895),I=s(1481);const D=["overlay"];function v(n,o){1&n&&t._UZ(0,"div")}function S(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,v,1,0,"div",6),t.qZA()),2&n){const e=t.oxw(2);t.Tol(e.spinner.class),t.Udp("color",e.spinner.color),t.xp6(1),t.Q6J("ngForOf",e.spinner.divArray)}}function C(n,o){if(1&n&&(t._UZ(0,"div",7),t.ALo(1,"safeHtml")),2&n){const e=t.oxw(2);t.Q6J("innerHTML",t.lcZ(1,1,e.template),t.oJD)}}function L(n,o){if(1&n&&(t.TgZ(0,"div",1,2),t.YNc(2,S,2,5,"div",3),t.YNc(3,C,2,3,"div",4),t.TgZ(4,"div",5),t.Hsn(5),t.qZA()()),2&n){const e=t.oxw();t.Udp("background-color",e.spinner.bdColor)("z-index",e.spinner.zIndex)("position",e.spinner.fullScreen?"fixed":"absolute"),t.Q6J("@.disabled",e.disableAnimation)("@fadeIn","in"),t.xp6(2),t.Q6J("ngIf",!e.template),t.xp6(1),t.Q6J("ngIf",e.template),t.xp6(1),t.Udp("z-index",e.spinner.zIndex)}}const w=["*"],E={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},m="primary";class h{constructor(o){Object.assign(this,o)}static create(o){return(null==o?.type||0===o.type.length)&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new h(o)}}let _=(()=>{class n{constructor(){this.spinnerObservable=new g.X(null)}getSpinner(e){return this.spinnerObservable.asObservable().pipe((0,f.h)(l=>l&&l.name===e))}show(e=m,l){return new Promise((a,M)=>{setTimeout(()=>{l&&Object.keys(l).length?(l.name=e,this.spinnerObservable.next(new h({...l,show:!0})),a(!0)):(this.spinnerObservable.next(new h({name:e,show:!0})),a(!0))},10)})}hide(e=m,l=10){return new Promise((a,M)=>{setTimeout(()=>{this.spinnerObservable.next(new h({name:e,show:!1})),a(!0)},l)})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const c=new t.OlP("NGX_SPINNER_CONFIG");let u=(()=>{class n{constructor(e){this._sanitizer=e}transform(e){if(e)return this._sanitizer.bypassSecurityTrustHtml(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(I.H7,16))},n.\u0275pipe=t.Yjl({name:"safeHtml",type:n,pure:!0}),n})(),i=(()=>{class n{constructor(e,l,a,M){this.spinnerService=e,this.changeDetector=l,this.elementRef=a,this.globalConfig=M,this.disableAnimation=!1,this.spinner=new h,this.ngUnsubscribe=new y.x,this.setDefaultOptions=()=>{const{type:N}=this.globalConfig??{};this.spinner=h.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??N,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor="rgba(51,51,51,0.8)",this.zIndex=99999,this.color="#fff",this.size="large",this.fullScreen=!0,this.name=m,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}handleKeyboardEvent(e){this.spinnerDOM&&this.spinnerDOM.nativeElement&&(this.fullScreen||!this.fullScreen&&this.isSpinnerZone(e.target))&&(e.returnValue=!1,e.preventDefault())}initObservable(){this.spinnerService.getSpinner(this.name).pipe((0,O.R)(this.ngUnsubscribe)).subscribe(e=>{this.setDefaultOptions(),Object.assign(this.spinner,e),e.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(e){return e===this.elementRef.nativeElement.parentElement||e.parentNode&&this.isSpinnerZone(e.parentNode)}ngOnChanges(e){for(const l in e)if(l){const a=e[l];if(a.isFirstChange())return;typeof a.currentValue<"u"&&a.currentValue!==a.previousValue&&""!==a.currentValue&&(this.spinner[l]=a.currentValue,"showSpinner"===l&&(a.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),"name"===l&&this.initObservable())}}getClass(e,l){this.spinner.divCount=E[e],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((M,N)=>N);let a="";switch(l.toLowerCase()){case"small":a="la-sm";break;case"medium":a="la-2x";break;case"large":a="la-3x"}return"la-"+e+" "+a}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_),t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(c,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-spinner"]],viewQuery:function(e,l){if(1&e&&t.Gf(D,5),2&e){let a;t.iGM(a=t.CRH())&&(l.spinnerDOM=a.first)}},hostBindings:function(e,l){1&e&&t.NdJ("keydown",function(M){return l.handleKeyboardEvent(M)},!1,t.evT)},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[t.TTD],ngContentSelectors:w,decls:1,vars:1,consts:[["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],["overlay",""],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(e,l){1&e&&(t.F$t(),t.YNc(0,L,6,12,"div",0)),2&e&&t.Q6J("ngIf",l.spinner.show)},dependencies:[b.sg,b.O5,u],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[(0,p.X$)("fadeIn",[(0,p.SB)("in",(0,p.oB)({opacity:1})),(0,p.eR)(":enter",[(0,p.oB)({opacity:0}),(0,p.jt)(300)]),(0,p.eR)(":leave",(0,p.jt)(200,(0,p.oB)({opacity:0})))])]},changeDetection:0}),n})(),r=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:c,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[b.ez]}),n})()}}]);
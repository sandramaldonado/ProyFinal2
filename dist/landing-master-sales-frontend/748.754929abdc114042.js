"use strict";(self.webpackChunklanding_master_sales_frontend=self.webpackChunklanding_master_sales_frontend||[]).push([[748,717],{6748:(I,p,r)=>{r.d(p,{Q:()=>C});var t=r(7579),a=r(4650),u=r(9886),_=r(3063),v=r(4859),c=r(3546),l=r(7392),d=r(2965),h=r(42),w=r(9717);let C=(()=>{class m{constructor(o,e){this.bsModalRef=o,this.webstore=e,this.widthDisplayCamera=270,this.trigger=new t.x}ngOnInit(){console.log("fuente :",this.source),this.source&&(this.webstoreImage=this.webstore.getDocument(this.source),this.webstoreImage&&(this.previewImage=this.webstoreImage))}handleInitError(o){o.mediaStreamError&&"NotAllowedError"===o.mediaStreamError.name&&console.warn("Camera access was not allowed by user!")}handleImage(o){console.info("received webcam image",o),this.webcamImage=o,this.previewImage=o.imageAsDataUrl}triggerSnapshot(){this.trigger.next()}get triggerObservable(){return this.trigger.asObservable()}savePicture(){this.source&&(this.webstoreImage=this.webcamImage?.imageAsDataUrl,this.webstore.saveDocument(this.source,this.webstoreImage)),this.bsModalRef.hide()}removePicture(){this.source&&(this.webstoreImage="",this.previewImage="",this.webstore.saveDocument(this.source,this.webstoreImage))}}return m.\u0275fac=function(o){return new(o||m)(a.Y36(u.UZ),a.Y36(_.f))},m.\u0275cmp=a.Xpm({type:m,selectors:[["app-take-picture"]],decls:20,vars:5,consts:[[1,"container"],[1,"row","d-flex","flex-column","justify-content-center","align-items-center","py-3"],[1,"mb-0"],[1,"text-center"],[2,"min-width","270px",3,"width","trigger","imageCapture","initError"],["mat-fab","","color","primary",3,"click"],[1,"p-2"],[1,"d-flex","flex-column","justify-content-center","align-items-center","border","rounded","mt-2","mt-lg-0","p-2",2,"background-color","white"],[1,"snapshot-title","text-center"],[1,"",2,"min-height","200px","width","270px","height","auto",3,"src"],[3,"content","click"]],template:function(o,e){1&o&&(a.TgZ(0,"div",0)(1,"div",1)(2,"h3"),a._uU(3,"Toma de Fotografia"),a.qZA(),a.TgZ(4,"p",2),a._uU(5,"Por favor acepte el requerimiento de uso de la camara"),a.qZA(),a.TgZ(6,"mat-card")(7,"mat-card-content",3)(8,"webcam",4),a.NdJ("imageCapture",function(s){return e.handleImage(s)})("initError",function(s){return e.handleInitError(s)}),a.qZA()(),a.TgZ(9,"mat-card-actions",3)(10,"button",5),a.NdJ("click",function(){return e.triggerSnapshot()}),a.TgZ(11,"mat-icon"),a._uU(12,"camera_enhance"),a.qZA()()(),a.TgZ(13,"mat-card-footer",6)(14,"div",7)(15,"div",8),a._uU(16,"Vista Previa"),a.qZA(),a._UZ(17,"img",9),a.TgZ(18,"app-button-outline",10),a.NdJ("click",function(){return e.removePicture()}),a.qZA(),a.TgZ(19,"app-button",10),a.NdJ("click",function(){return e.savePicture()}),a.qZA()()()()()()),2&o&&(a.xp6(8),a.Q6J("width",e.widthDisplayCamera)("trigger",e.triggerObservable),a.xp6(9),a.Q6J("src",e.previewImage,a.LSH),a.xp6(1),a.Q6J("content","Eliminar Fotografia"),a.xp6(1),a.Q6J("content","Guardar"))},dependencies:[v.lW,c.a8,c.dn,c.hq,c.rt,l.Hw,d.i3,h.r,w.Y],styles:[".mat-card[_ngcontent-%COMP%]{width:23rem}.fasquare[_ngcontent-%COMP%]{font-size:2rem;padding:1px;border-radius:25%;color:#6731a2;border:#5C349E 1px solid;box-shadow:0 3px 6px #6731a280}"]}),m})()},9717:(I,p,r)=>{r.d(p,{Y:()=>v});var t=r(4650),a=r(4006),u=r(6895);function _(c,l){if(1&c&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&c){const d=t.oxw();t.xp6(1),t.Oqu(d.message)}}let v=(()=>{class c{constructor(){this.content="",this.styles="",this.disabled=!1,this.message=""}}return c.\u0275fac=function(d){return new(d||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-button-outline"]],inputs:{content:"content",styles:"styles",disabled:"disabled",message:"message"},features:[t._Bn([{provide:a.JU,useExisting:(0,t.Gpc)(()=>c),multi:!0}])],decls:4,vars:4,consts:[[1,"button-wrap"],["class","button-message",4,"ngIf"],[1,"button-active",3,"ngClass","disabled"],[1,"button-message"]],template:function(d,h){1&d&&(t.TgZ(0,"div",0),t.YNc(1,_,2,1,"div",1),t.TgZ(2,"button",2),t._uU(3),t.qZA()()),2&d&&(t.xp6(1),t.Q6J("ngIf",h.message),t.xp6(1),t.Q6J("ngClass",h.disabled?"button-disactived":"button-active")("disabled",h.disabled),t.xp6(1),t.Oqu(h.content))},dependencies:[u.mk,u.O5],styles:[".button-active[_ngcontent-%COMP%]{background-color:#fff;font-size:1rem!important;padding:12px 10px;border-radius:20px;color:#5c339d;width:285px;height:44px!important;box-shadow:0 4px 15px #0000004d;border:1px solid #5C339D;font-family:MUSEO500-REGULAR}@media (max-width: 768px){.button-active[_ngcontent-%COMP%]{margin-right:0!important;font-size:.9em!important}}@media (max-width: 576px){.button-active[_ngcontent-%COMP%]{height:45px}}.button-wrap[_ngcontent-%COMP%]{margin-top:1.5vh}.button-disactived[_ngcontent-%COMP%]{background:#e0e0e0;font-size:1.1em;border-radius:20px;color:#000;margin-top:1.5vh;width:300px;height:40px;font-weight:700;border:2px solid #8260A5;font-family:MUSEO500-REGULAR;box-sizing:border-box}button[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;position:relative;transition:all .4s ease-in-out}.button-message[_ngcontent-%COMP%]{color:#fff;font-weight:900;font-size:small;font-family:MUSEO500-REGULAR;margin-bottom:4px}.button-active[_ngcontent-%COMP%]:hover{transform:scale(1.04,1.0000000099);-ms-transform:scale(1.04,1.0000000099);-webkit-transform:scale(1.04,1.0000000099)}button[_ngcontent-%COMP%]:focus{border-color:#0000;box-shadow:0 1px 1px #d0d0d0 inset,0 0 8px #dcdcdc;outline:0 none}"]}),c})()},2965:(I,p,r)=>{r.d(p,{Tm:()=>w,i3:()=>d});var t=r(4650),a=r(6895);const u=["video"],_=["canvas"];function v(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.rotateVideoInput(!0))}),t.qZA()}}class c{constructor(o,e,i){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=o,this._imageData=i}static getDataFromDataUrl(o,e){return o.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=c.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}let d=(()=>{class n{constructor(){this.width=640,this.height=480,this.videoOptions=n.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=n.DEFAULT_IMAGE_TYPE,this.imageQuality=n.DEFAULT_IMAGE_QUALITY,this.imageCapture=new t.vpe,this.initError=new t.vpe,this.imageClick=new t.vpe,this.cameraSwitched=new t.vpe,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(i=>{"string"==typeof i?this.switchToVideoInput(i):this.rotateVideoInput(!1!==i)})}static getMediaConstraintsForDevice(e,i){const s=i||this.DEFAULT_VIDEO_OPTIONS;return e&&(s.deviceId={exact:e}),s}static getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){const i=e.getConstraints().deviceId;return n.getValueFromConstrainDOMString(i)}}static getFacingModeFromMediaStreamTrack(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){const i=e.getConstraints().facingMode;return n.getValueFromConstrainDOMString(i)}}}static isUserFacing(e){const i=n.getFacingModeFromMediaStreamTrack(e);return!!i&&"user"===i.toLowerCase()}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const e=this.nativeVideoElement,i={width:this.width,height:this.height};e.videoWidth&&(i.width=e.videoWidth,i.height=e.videoHeight);const s=this.canvas.nativeElement;s.width=i.width,s.height=i.height;const b=s.getContext("2d");b.drawImage(e,0,0);const g=this.imageType?this.imageType:n.DEFAULT_IMAGE_TYPE,A=s.toDataURL(g,this.imageQuality?this.imageQuality:n.DEFAULT_IMAGE_QUALITY);let E=null;this.captureImageData&&(E=b.getImageData(0,0,s.width,s.height)),this.imageCapture.next(new c(A,g,E))}rotateVideoInput(e){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(e?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){const e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){const e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(e,i){const s=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const b=n.getMediaConstraintsForDevice(e,i);navigator.mediaDevices.getUserMedia({video:b}).then(g=>{this.mediaStream=g,s.srcObject=g,s.play(),this.activeVideoSettings=g.getVideoTracks()[0].getSettings();const f=n.getDeviceIdFromMediaStreamTrack(g.getVideoTracks()[0]);this.cameraSwitched.next(f),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=f?this.availableVideoInputs.findIndex(A=>A.deviceId===f):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(g=>{this.initError.next({message:g.message,mediaStreamError:g})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return n.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(e=>e.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,i)=>{(class l{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((o,e)=>{navigator.mediaDevices.enumerateDevices().then(i=>{o(i.filter(s=>"videoinput"===s.kind))}).catch(i=>{e(i.message||i)})}):Promise.reject("enumerateDevices() not supported.")}}).getAvailableVideoInputs().then(s=>{this.availableVideoInputs=s,e(s)}).catch(s=>{this.availableVideoInputs=[],i(s)})})}}return n.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},n.DEFAULT_IMAGE_TYPE="image/jpeg",n.DEFAULT_IMAGE_QUALITY=.92,n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["webcam"]],viewQuery:function(e,i){if(1&e&&(t.Gf(u,7),t.Gf(_,7)),2&e){let s;t.iGM(s=t.CRH())&&(i.video=s.first),t.iGM(s=t.CRH())&&(i.canvas=s.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return i.imageClick.next()}),t.TgZ(1,"video",1,2),t.NdJ("resize",function(){return i.videoResize()}),t.qZA(),t.YNc(3,v,1,0,"div",3),t._UZ(4,"canvas",4,5),t.qZA()),2&e&&(t.xp6(1),t.Tol(i.videoStyleClasses),t.Q6J("width",i.videoWidth)("height",i.videoHeight),t.xp6(2),t.Q6J("ngIf",i.allowCameraSwitch&&i.availableVideoInputs.length>1&&i.videoInitialized),t.xp6(1),t.Q6J("width",i.width)("height",i.height))},dependencies:[a.O5],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),n})(),w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.ez]]}),n})()}}]);
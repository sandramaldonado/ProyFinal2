"use strict";(self.webpackChunklanding_master_sales_frontend=self.webpackChunklanding_master_sales_frontend||[]).push([[128],{9315:(ie,p,s)=>{s.r(p),s.d(p,{OrderModule:()=>ne});var c=s(6895),r=s(3060),e=s(4650),u=s(3063),v=s(7065),f=s(529);let C=(()=>{class n{constructor(t,o){this.webstoreservice=t,this.httpClient=o,this.apiUrl=`${v.N.BreApiUrl}`}coverageEvaluation(t){console.log(t);const i={headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}};var l=this.webstoreservice.getPlanComposition(),d={productTypeCode:[],compositionPlanCode:l.planCompositionCode,channelCode:"landing"};let h=[];for(let m=0;m<l.planList.length;m++)h.push(l.planList[m].consumptionEntityType);return d.productTypeCode=h,this.httpClient.post(`${this.apiUrl}/productCatalog/coverageEvaluation`,JSON.stringify(d),i)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(u.f),e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=s(6616),x=s(4527),b=s(7141),S=s(2241),T=s(3517),y=s(3861),M=s(42),O=s(9717);function I(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.next())}),e.qZA()}2&n&&e.Q6J("content","Continuar")}let g=(()=>{class n{constructor(t){this.webstoreservice=t,this.nextScoringStep=new e.vpe,this.acceptRecurrentPayment=!1}ngOnInit(){}next(){this.webstoreservice.saveDataInSession("scoring",{acceptRecurrentPayment:!0}),this.acceptRecurrentPayment=!0,this.nextScoringStep.emit(!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-result-scoring"]],outputs:{nextScoringStep:"nextScoringStep"},decls:13,vars:2,consts:[[1,"container"],[1,"row","pb-3"],[1,"section-body","col-12","py-3"],[1,"d-flex","flex-column","justify-content-around","align-items-center"],[1,"d-flex","flex-column"],[3,"content","click",4,"ngIf"],[3,"content"],[3,"content","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"section",2)(3,"div",3)(4,"h3"),e._uU(5,"Antes de continuar"),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Debido a tu capacidad de endeudamiento, para continuar el proceso de compra por este canal deber\xe1s habilitar el pago autom\xe1tico de tu servicio de manera mensual mediante una tarjeta de d\xe9bito o cr\xe9dito que te pediremos antes de concluir tu compra. Es un proceso sencillo que te asegurar\xe1 que puedas adquirir este plan."),e.qZA(),e.TgZ(8,"p"),e._uU(9,"\xbfDeseas continuar?"),e.qZA(),e.TgZ(10,"div",4),e.YNc(11,I,1,1,"app-button",5),e.qZA(),e._UZ(12,"app-button-outline",6),e.qZA()()()()),2&t&&(e.xp6(11),e.Q6J("ngIf",!o.acceptRecurrentPayment),e.xp6(1),e.Q6J("content","Ver otros planes"))},dependencies:[c.O5,M.r,O.Y],styles:[".mat-card[_ngcontent-%COMP%]{padding:1px!important;width:100%;color:#7b7b7b}.section-body[_ngcontent-%COMP%]{background:white;color:#848484}"]}),n})();var A=s(7876),E=s(5428),N=s(8887);function k(n,a){1&n&&e._UZ(0,"img",21)}function Z(n,a){1&n&&e._UZ(0,"img",22)}function w(n,a){1&n&&e._UZ(0,"img",23)}function J(n,a){if(1&n&&(e.TgZ(0,"div",14)(1,"div",15),e.YNc(2,k,1,0,"img",16),e.YNc(3,Z,1,0,"img",17),e.YNc(4,w,1,0,"img",18),e.qZA(),e.TgZ(5,"div",19)(6,"p",20),e._uU(7),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA()()()),2&n){const t=a.$implicit;e.xp6(2),e.Q6J("ngIf",t.componentTradeName&&"MOVIL"==(null==t?null:t.consumptionEntityType)),e.xp6(1),e.Q6J("ngIf",t.componentTradeName&&"IFIXED"==(null==t?null:t.consumptionEntityType)),e.xp6(1),e.Q6J("ngIf",t.componentTradeName&&"TV"==(null==t?null:t.consumptionEntityType)),e.xp6(3),e.Oqu(null==t?null:t.consumptionEntityType),e.xp6(2),e.Oqu(null==t?null:t.componentOffer)}}function L(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-check-coverage",24),e.NdJ("nextCoverageStep",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeModule(i.modules.checkCoverage.alias))}),e.qZA()}if(2&n){const t=e.oxw();e.s9C("id",t.modules.checkCoverage.alias)}}function R(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-result-scoring",25),e.NdJ("nextScoringStep",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeModule(i.modules.scoring.alias))}),e.qZA()}if(2&n){const t=e.oxw();e.s9C("id",t.modules.scoring.alias)}}function F(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-admin-client",26),e.NdJ("nextAdminClientStep",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeModule(i.modules.adminClient.alias))}),e.qZA()}if(2&n){const t=e.oxw();e.s9C("id",t.modules.adminClient.alias)}}function Y(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-check-email",27),e.NdJ("nextCheckEmailStep",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeModule(i.modules.checkEmail.alias))}),e.qZA()}if(2&n){const t=e.oxw();e.s9C("id",t.modules.checkEmail.alias)}}function B(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-documents",28),e.NdJ("nextDocumentStep",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeModule(i.modules.documents.alias))}),e.qZA()}if(2&n){const t=e.oxw();e.s9C("id",t.modules.documents.alias)}}function D(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-movil-list",29),e.NdJ("nextMovilListStep",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeModule(i.modules.movilList.alias))}),e.qZA()}if(2&n){const t=e.oxw();e.s9C("id",t.modules.movilList.alias)}}function Q(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-card-payment",29),e.NdJ("nextMovilListStep",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeModule(i.modules.payment.alias))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("id",t.modules.payment.alias)}}const U=[{path:"",component:(()=>{class n{constructor(t,o,i,l,d){this.webstoreservice=t,this.breservices=o,this.tokenService=i,this.scroller=l,this.ordersService=d,this.showCoverage=!0,this.showScoring=!0,this.orderTabs=[],this.modules={checkCoverage:{visible:!1,active:!1,enabled:!0,alias:"checkcoverage"},scoring:{visible:!1,active:!1,enabled:!0,alias:"scoring"},adminClient:{visible:!1,active:!1,enabled:!0,alias:"adminclient"},checkEmail:{visible:!1,active:!1,enabled:!0,alias:"checkemail"},documents:{visible:!1,active:!1,enabled:!0,alias:"documents"},movilList:{visible:!1,active:!1,enabled:!0,alias:"movilList"},detailsale:{visible:!1,active:!1,enabled:!0,alias:"detailsale"},deliveryMethod:{visible:!1,active:!1,enabled:!0,alias:"deliverymethod"},payment:{visible:!1,active:!1,enabled:!0,alias:"payment"}}}ngOnInit(){this.planCompositionCode=this.webstoreservice.getPlanCompositionCode(),this.planComposition=this.webstoreservice.getPlanComposition(),this.getToken()}loadBussinesRules(){this.breservices.coverageEvaluation(this.autentication.data.token).subscribe(t=>{this.coverageData=t,this.scoringStatus=this.webstoreservice.getStatusScoring(),this.initializeComponents()})}initializeComponents(){this.planList=this.planComposition?.planList,"OK"==this.coverageData.data.requireCoverageVerification?this.modules.checkCoverage.visible=!0:this.modules.checkCoverage.enabled=!1,this.modules.scoring.enabled="NORMAL"==this.scoringStatus,this.modules.scoring.visible=this.modules.scoring.enabled&&!this.modules.checkCoverage.visible,this.modules.adminClient.visible=!this.modules.scoring.visible&&!this.modules.checkCoverage.visible}getToken(){this.tokenService.gettoken().subscribe(t=>{this.autentication=t,this.webstoreservice.saveDataInSession("userId",t.data?.userId),this.createOrder()})}changeModule(t){console.log(t);var o=this;switch(t){case"checkcoverage":this.modules.scoring.enabled?(this.modules.scoring.visible=!0,setTimeout(function(){o.scroller.scrollToAnchor("scoring")},1e3)):this.changeModule("scoring");break;case"scoring":this.modules.adminClient.enabled?(this.modules.adminClient.visible=!0,setTimeout(function(){o.scroller.scrollToAnchor("adminclient")},1e3)):this.changeModule("adminclient");break;case"adminclient":this.modules.checkEmail.enabled?(this.modules.checkEmail.visible=!0,setTimeout(function(){o.scroller.scrollToAnchor("checkemail")},1e3)):this.changeModule("checkemail");break;case"checkemail":this.modules.documents.enabled?(this.modules.documents.visible=!0,setTimeout(function(){o.scroller.scrollToAnchor("documents")},1e3)):this.changeModule("documents");break;case"documents":this.modules.movilList.enabled?(this.modules.movilList.visible=!0,setTimeout(function(){o.scroller.scrollToAnchor("movillist")},1e3)):this.changeModule("movillist");break;case"movilList":this.modules.payment.enabled?(this.modules.payment.visible=!0,setTimeout(function(){o.scroller.scrollToAnchor("payment")},1e3)):this.changeModule("payment")}}createOrder(){const t=this.webstoreservice.getClientInformation();this.ordersService.createOrder({orderType:"PTFSALE",orderTypeName:"VENTAS",partyId:t.personId,fullName:t.fullName,customerId:t.clientId,channelCode:"CAATCL",channelName:"ATENCION AL CLIENTE",workplaceCode:"TIEEDISSA",workplaceName:"Tienda Edificio Issa",cityCode:t.documentCity,cityName:t.documentCityDesc,userId:this.autentication.data.userId,userName:"landing",userFullName:"landing",userRoleCode:"ROL_ASESOR_3"},this.autentication.data.token).subscribe(i=>{console.log(i),this.webstoreservice.saveDataInSession("orderMainId",i.data.data.orderMainId),this.registerCommercialOffer(i.data.data.orderMainId),this.loadBussinesRules()})}registerCommercialOffer(t){const o=this.webstoreservice.getPlanComposition(),i={orderId:t,sequence:0,userId:this.autentication.data.userId,microFrontendId:"commercial-offers-microfront-app",microFrontendData:JSON.stringify(o),statusCode:"INI"};this.ordersService.registerOrderView(i,this.autentication.data.token).subscribe(l=>{console.log(l),this.loadBussinesRules()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.f),e.Y36(C),e.Y36(_.B),e.Y36(c.EM),e.Y36(x.N))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-order"]],decls:18,vars:9,consts:[[1,"container"],[1,"row"],[1,"d-none","d-md-block","col-5","bg","bg-light","bg-gradient","border","py-5","px-5","my-1"],[1,"sticky-top"],[1,"section-body","col-12","py-3"],[1,"d-flex","flex-column","justify-content-around","align-items-center"],["class","row w-100 border-top pt-2",4,"ngFor","ngForOf"],[1,"col-12","col-md-7"],[3,"id","nextCoverageStep",4,"ngIf"],[3,"id","nextScoringStep",4,"ngIf"],[3,"id","nextAdminClientStep",4,"ngIf"],[3,"id","nextCheckEmailStep",4,"ngIf"],[3,"id","nextDocumentStep",4,"ngIf"],[3,"id","nextMovilListStep",4,"ngIf"],[1,"row","w-100","border-top","pt-2"],[1,"col-1","text-end"],["src","assets/images/iconos/movil.png","alt","","style","width: 20px; height: auto;",4,"ngIf"],["src","assets/images/iconos/wifi.png","alt","","style","width: 25px; height: auto;",4,"ngIf"],["src","assets/images/iconos/tv.png","alt","","style","width: 25px; height: auto;",4,"ngIf"],[1,"col-11"],[1,"component-title","mb-0","fw-bold"],["src","assets/images/iconos/movil.png","alt","",2,"width","20px","height","auto"],["src","assets/images/iconos/wifi.png","alt","",2,"width","25px","height","auto"],["src","assets/images/iconos/tv.png","alt","",2,"width","25px","height","auto"],[3,"id","nextCoverageStep"],[3,"id","nextScoringStep"],[3,"id","nextAdminClientStep"],[3,"id","nextCheckEmailStep"],[3,"id","nextDocumentStep"],[3,"id","nextMovilListStep"]],template:function(t,o){1&t&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"section",4)(6,"div",5)(7,"h3"),e._uU(8),e.qZA(),e.YNc(9,J,10,5,"div",6),e.qZA()()()(),e.TgZ(10,"div",7),e.YNc(11,L,1,1,"app-check-coverage",8),e.YNc(12,R,1,1,"app-result-scoring",9),e.YNc(13,F,1,1,"app-admin-client",10),e.YNc(14,Y,1,1,"app-check-email",11),e.YNc(15,B,1,1,"app-documents",12),e.YNc(16,D,1,1,"app-movil-list",13),e.YNc(17,Q,1,1,"app-card-payment",13),e.qZA()()()),2&t&&(e.xp6(8),e.Oqu(null==o.planComposition?null:o.planComposition.groupTradeName),e.xp6(1),e.Q6J("ngForOf",null==o.planComposition?null:o.planComposition.planList),e.xp6(2),e.Q6J("ngIf",o.modules.checkCoverage.visible),e.xp6(1),e.Q6J("ngIf",o.modules.scoring.visible),e.xp6(1),e.Q6J("ngIf",o.modules.adminClient.visible),e.xp6(1),e.Q6J("ngIf",o.modules.checkEmail.visible),e.xp6(1),e.Q6J("ngIf",o.modules.documents.visible),e.xp6(1),e.Q6J("ngIf",o.modules.movilList.visible),e.xp6(1),e.Q6J("ngIf",o.modules.payment.visible))},dependencies:[c.sg,c.O5,b.T,S.r,T.W,y.A,g,A.G,E.h,N.$]}),n})()}];let P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[r.Bz.forChild(U),r.Bz]}),n})();var G=s(931),z=s(5780),K=s(3434),j=s(605);const H=[{path:"",component:g}];let V=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[r.Bz.forChild(H),r.Bz]}),n})();var $=s(4466);let X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,V,$.m]}),n})();var q=s(9499),W=s(5380),ee=s(2593),te=s(5943);let ne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,P,G.CheckCoverageModule,z.AdminClientModule,K.CheckEmailModule,j.DocumentsModule,X,q.O,W.MovilListModule,ee.DetailSaleModule,te.CardPaymentModule]}),n})()}}]);
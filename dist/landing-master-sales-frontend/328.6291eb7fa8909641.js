"use strict";(self.webpackChunklanding_master_sales_frontend=self.webpackChunklanding_master_sales_frontend||[]).push([[328,625],{2671:(D,d,s)=>{s.d(d,{y:()=>g});var l=s(529),c=s(5625),t=s(262),m=s(2843),v=s(4650);let g=(()=>{class i{constructor(o){this.httpClient=o,this.apiUrl="https://omega.devnt.ssidevops.com/crm360/client/person/search",this.headers=new l.WM,this.httpOptions={}}getClientByMovil(o,r){return this.headers={"Content-Type":"application/json",Authorization:"Bearer "+r},this.httpClient.get(`${this.apiUrl}/${o}`,{headers:this.headers})}getClientByDNI(o,r){const O={headers:{"Content-Type":"application/json",Authorization:"Bearer "+r}},u=JSON.stringify({documentId:o,documentType:""});return this.httpClient.post(`${this.apiUrl}`,u,O).pipe((0,c.X)(1),(0,t.K)(this.handleError))}handleError(o){return o.error instanceof ErrorEvent?console.error("An error occurred:",o.error.message):console.error(`Backend returned code ${o.status}, body was: ${o.error}`),(0,m._)("Something bad happened; please try again later.")}}return i.\u0275fac=function(o){return new(o||i)(v.LFG(l.eN))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},3063:(D,d,s)=>{s.d(d,{f:()=>g});var l=s(7065),c=s(1002),t=s(4650),m=s(5219),v=s(529);let g=(()=>{class i{constructor(o,r,C){this.sessionStorageService=o,this.localStorageService=r,this.httpClient=C,this.httpPostOptions=c.z8,this.httpGetOptions=c.bN,this.urToken="https://omega.devnt.ssidevops.com/auth/login"}saveToken(){this.httpClient.post(`${l.N.SSIAuthApiUrl}`,JSON.stringify({username:l.N.SSITokenUsername,password:l.N.SSITokenPassword}),this.httpPostOptions).subscribe(r=>{r.data?.token&&localStorage.setItem("TOKEN",r.data.token),this.localStorageService.store("TOKEN",r.data?.token)})}saveAuthenticateInformation(o){this.sessionStorageService.store("authenticateInformation",o)}getAuthenticateInformation(){return this.sessionStorageService.retrieve("authenticateInformation")}saveClientInformation(o){this.sessionStorageService.store("clientInformation",o)}getClientInformation(){return this.sessionStorageService.retrieve("clientInformation")}saveSelfie(o){this.sessionStorageService.store("photoFace",o)}getSelfie(){return console.log(this.sessionStorageService.retrieve("photoFace")),this.sessionStorageService.retrieve("photoFace")}saveDocument(o,r){this.sessionStorageService.store(o,r)}getDocument(o){return this.sessionStorageService.retrieve(o)}savePlanCompositionCode(o){this.sessionStorageService.store("planCompositionCode",o)}getPlanCompositionCode(){return this.sessionStorageService.retrieve("planCompositionCode")}savePlanComposition(o){this.sessionStorageService.store("planComposition",o)}getPlanComposition(){return this.sessionStorageService.retrieve("planComposition")}clearWebStorePlanComposition(){this.sessionStorageService.clear("planCompositionCode"),this.sessionStorageService.clear("planComposition")}saveStatusScoring(o){this.sessionStorageService.store("statusScoring",o)}getStatusScoring(){return this.sessionStorageService.retrieve("statusScoring")}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(m.uR),t.LFG(m.n2),t.LFG(v.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},2328:(D,d,s)=>{s.r(d),s.d(d,{OfferModule:()=>A});var l=s(6895),c=s(3060),t=s(4650),m=s(2671),v=s(6616),g=s(529),i=s(5625),h=s(262),o=s(2843);let r=(()=>{class n{constructor(e){this.httpClient=e,this.apiUrl="https://omega.devnt.ssidevops.com/product/plans",this.headers=new g.WM,this.httpOptions={}}getPlanList(e){var p={"Content-Type":"application/json",Authorization:"Bearer "+e};const S=JSON.stringify({channel:"CAVENT",city:null,clientId:null,sourcePlan:null,transactionType:"VENTA",userId:21,workplace:null});return this.httpClient.post(`${this.apiUrl}`,S,{headers:p}).pipe((0,i.X)(1),(0,h.K)(this.handleError))}handleError(e){return e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error(`Backend returned code ${e.status}, body was: ${e.error}`),(0,o._)("Something bad happened; please try again later.")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=s(3063),O=s(42);function u(n,a){1&n&&t._UZ(0,"img",16)}function E(n,a){1&n&&t._UZ(0,"img",17)}function f(n,a){1&n&&t._UZ(0,"img",18)}function _(n,a){if(1&n&&(t.TgZ(0,"div",9)(1,"div",10),t.YNc(2,u,1,0,"img",11),t.YNc(3,E,1,0,"img",12),t.YNc(4,f,1,0,"img",13),t.qZA(),t.TgZ(5,"div",14)(6,"p",15),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA()()()),2&n){const e=a.$implicit;t.xp6(2),t.Q6J("ngIf",e.componentTradeName&&"MOVIL"==(null==e?null:e.consumptionEntityType)),t.xp6(1),t.Q6J("ngIf",e.componentTradeName&&"IFIXED"==(null==e?null:e.consumptionEntityType)),t.xp6(1),t.Q6J("ngIf",e.componentTradeName&&"TV"==(null==e?null:e.consumptionEntityType)),t.xp6(3),t.Oqu(null==e?null:e.consumptionEntityType),t.xp6(2),t.Oqu(null==e?null:e.componentOffer)}}function T(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-button",19),t.NdJ("click",function(){t.CHM(e);const S=t.oxw();return t.KtG(S.onClick())}),t.qZA()()}2&n&&(t.xp6(1),t.Q6J("content","Comprar este plan"))}const I=[{path:"",component:(()=>{class n{constructor(e,p,S,P,b,x){this.clientService=e,this.tokenService=p,this.route=S,this.router=P,this.planListService=b,this.webstoreService=x,this.showButton=!1}ngOnInit(){this.webstoreService.clearWebStorePlanComposition(),this.route.queryParams.subscribe(e=>{this.planCompositionCode=e.code}),this.getToken()}getToken(){this.tokenService.gettoken().subscribe(e=>{this.autentication=e,this.getPlansList()})}getPlansList(){var e=this;this.planListService.getPlanList(this.autentication.data.token).subscribe(p=>{this.planesList=p,console.log(this.planesList);var P=this.planesList.data.data.filter(function(b){return b.planCompositionCode===e.planCompositionCode});this.planComposition=P[0],console.log(this.planComposition),this.showButton=!0})}onClick(){this.webstoreService.savePlanCompositionCode(this.planCompositionCode),this.webstoreService.savePlanComposition(this.planComposition),this.router.navigate(["/client/validationClient"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.y),t.Y36(v.B),t.Y36(c.gz),t.Y36(c.F0),t.Y36(r),t.Y36(C.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-offer"]],decls:11,vars:3,consts:[[1,"container"],[1,"row","pb-5"],[1,"section-header","col-12","py-3"],[1,""],["src","assets/images/logo-viva.png","alt","",1,"pb-2",2,"width","200px","height","auto"],[1,"section-body","col-12","py-3"],[1,"d-flex","flex-column","justify-content-around","align-items-center"],["class","row w-100 border-top pt-2",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"row","w-100","border-top","pt-2"],[1,"col-1","text-end"],["src","assets/images/iconos/movil.png","alt","","style","width: 20px; height: auto;",4,"ngIf"],["src","assets/images/iconos/wifi.png","alt","","style","width: 25px; height: auto;",4,"ngIf"],["src","assets/images/iconos/tv.png","alt","","style","width: 25px; height: auto;",4,"ngIf"],[1,"col-11"],[1,"component-title","mb-0","fw-bold"],["src","assets/images/iconos/movil.png","alt","",2,"width","20px","height","auto"],["src","assets/images/iconos/wifi.png","alt","",2,"width","25px","height","auto"],["src","assets/images/iconos/tv.png","alt","",2,"width","25px","height","auto"],[3,"content","click"]],template:function(e,p){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"section",2)(3,"div",3),t._UZ(4,"img",4),t.qZA()(),t.TgZ(5,"section",5)(6,"div",6)(7,"h3"),t._uU(8),t.qZA(),t.YNc(9,_,10,5,"div",7),t.YNc(10,T,2,1,"div",8),t.qZA()()()()),2&e&&(t.xp6(8),t.Oqu(null==p.planComposition?null:p.planComposition.groupTradeName),t.xp6(1),t.Q6J("ngForOf",null==p.planComposition?null:p.planComposition.planList),t.xp6(1),t.Q6J("ngIf",p.showButton))},dependencies:[l.sg,l.O5,O.r],styles:[".mat-card[_ngcontent-%COMP%]{padding:1px!important;width:100%;color:#7b7b7b}.section-body[_ngcontent-%COMP%]{background:white;color:#848484}.component-title[_ngcontent-%COMP%]{color:#5c339d}.section-header[_ngcontent-%COMP%]{background:linear-gradient(180deg,#D6F084 0%,rgba(214,240,132,0) 100%)}"]}),n})()}];let L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.Bz.forChild(I),c.Bz]}),n})();var M=s(4466);let A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,L,M.m]}),n})()},5625:(D,d,s)=>{s.d(d,{X:()=>g});var l=s(4482),c=s(5403),t=s(4671),m=s(5963),v=s(8421);function g(i=1/0){let h;h=i&&"object"==typeof i?i:{count:i};const{count:o=1/0,delay:r,resetOnSuccess:C=!1}=h;return o<=0?t.y:(0,l.e)((O,u)=>{let f,E=0;const _=()=>{let T=!1;f=O.subscribe((0,c.x)(u,y=>{C&&(E=0),u.next(y)},void 0,y=>{if(E++<o){const I=()=>{f?(f.unsubscribe(),f=null,_()):T=!0};if(null!=r){const L="number"==typeof r?(0,m.H)(r):(0,v.Xf)(r(y,E)),M=(0,c.x)(u,()=>{M.unsubscribe(),I()},()=>{u.complete()});L.subscribe(M)}else I()}else u.error(y)})),T&&(f.unsubscribe(),f=null,_())};_()})}}}]);
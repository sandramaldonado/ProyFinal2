"use strict";(self.webpackChunklanding_master_sales_frontend=self.webpackChunklanding_master_sales_frontend||[]).push([[380],{5428:(T,u,o)=>{o.d(u,{h:()=>k});var i=o(4650),v=o(529),M=o(5625),h=o(262),C=o(2843),S=o(7065);let b=(()=>{class a{constructor(t){this.httpClient=t,this.apiUrl=`${S.N.MovilNumberListApiUrl}`,this.headers=new v.WM,this.httpOptions={}}getMovilList(t,e){return this.httpClient.post(`${this.apiUrl}`,t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).pipe((0,M.X)(1),(0,h.K)(this.handleError))}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error(`Backend returned code ${t.status}, body was: ${t.error}`),(0,C._)("Something bad happened; please try again later.")}}return a.\u0275fac=function(t){return new(t||a)(i.LFG(v.eN))},a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var y=o(3063),I=o(4527),c=o(4006),f=o(8423),g=o(6895),L=o(3546),O=o(1948),F=o(42);function l(a,d){if(1&a){const t=i.EpF();i.TgZ(0,"div",11)(1,"div",12)(2,"mat-radio-button",13),i.NdJ("change",function(n){i.CHM(t);const s=i.oxw(2);return i.KtG(s.radioChange(n))}),i.TgZ(3,"span"),i._uU(4),i.qZA()()()()}if(2&a){const t=d.$implicit;i.xp6(1),i.Akn(t.style),i.Tol(t.description),i.xp6(1),i.Q6J("value",t.value)("checked",t.checked),i.xp6(2),i.hij("\xa0",t.name,"")}}function m(a,d){if(1&a){const t=i.EpF();i.TgZ(0,"div",11)(1,"div",14)(2,"a",15),i.NdJ("click",function(){i.CHM(t);const n=i.oxw(2);return i.KtG(n.clickme())}),i._uU(3," Mas opciones.."),i.qZA()()()}}function p(a,d){if(1&a){const t=i.EpF();i.TgZ(0,"div",2)(1,"div",3)(2,"section",4)(3,"h3"),i._uU(4),i.qZA(),i.TgZ(5,"p"),i._uU(6),i.qZA(),i.TgZ(7,"mat-card")(8,"mat-card-content")(9,"form",5)(10,"div")(11,"div",6),i.YNc(12,l,5,7,"div",7),i.YNc(13,m,4,0,"div",8),i.qZA()(),i.TgZ(14,"div",9)(15,"app-button",10),i.NdJ("click",function(){i.CHM(t);const n=i.oxw();return i.KtG(n.next())}),i.qZA()()()()()()()()}if(2&a){const t=i.oxw();i.xp6(4),i.Oqu(t.title),i.xp6(2),i.Oqu(t.message),i.xp6(6),i.Q6J("ngForOf",t.linesList),i.xp6(1),i.Q6J("ngIf",5===t.limitLine),i.xp6(2),i.Q6J("content","Continuar")}}let k=(()=>{class a{constructor(t,e,n,s,r){this.movilListService=t,this.webstoreService=e,this.ordersService=n,this.formBuilder=s,this.spinner=r,this.title="Elige tu N\xfamero",this.message="Te damos algunas opciones de l\xedneas telef\xf3nicas para que puedas tener tu nuevo plan con un n\xfamero telef\xf3nico que te agrade.",this.visited=!1,this.linesList=[],this.internetList=[],this.tvList=[],this.movilState=!1,this.internetState=!1,this.entertainmentState=!1,this.movilLine="",this.wanLine="",this.tvLine="",this.limitLine=5,this.movilCounter=0,this.nextMovilListStep=new i.vpe,this.key=sessionStorage.getItem("key"),this.orderId=this.webstoreService.getDataInSession("orderMainId"),this.userId=this.webstoreService.getDataInSession("userId")}ngOnInit(){this.spinner.show(),this.armadoJsonScoring(),this.searchList()}armadoJsonScoring(){this.planComposition=this.webstoreService.getPlanComposition(),this.planList=this.planComposition?.planList,console.log(this.planComposition),console.log(this.planList),this.productTypeCode=[];for(let t=0;t<this.planList.length;t++)this.productTypeCode.push(this.planList[t].consumptionEntityType);this.planService=JSON.stringify({userCode:"14",ceTypeCodeList:this.productTypeCode,processId:this.orderId})}searchList(){let t="",e="",n="";this.listagroup=[],this.movilListService.getMovilList(this.planService,this.key).subscribe(s=>{if(this.numberList=s,this.spinner.hide(),console.log(this.numberList),null!=this.numberList.data.data.movil&&(t=this.numberList.data.data.movil),t.length>0){this.movilState=!0,this.listagroup.push("movil_control");for(let r=0;r<this.limitLine;r++)this.movilCounter=r,r<this.limitLine&&(0==r?(this.movilLine=t[r],this.linesList.push({id:r.toString(),name:t[r],value:t[r],description:"alert alert-info divOption",style:"background-color: #AC99CE; color: white; border: 2px solid #5C349D; border-radius:15px;",checked:!0})):this.linesList.push({id:r.toString(),name:t[r],value:t[r],description:"alert alert-secondary divOption",style:"background-color: #F1F1F1; color: black; border-radius:15px;",checked:!1}))}null!=this.numberList.data.data.ifixed&&(e=this.numberList.data.data.ifixed),null!=this.numberList.data.data.tv&&(n=this.numberList.data.data.tv),console.log(e),e.length>0&&(this.internetState=!0,this.wanLine=e[0]),console.log(n),n.length>0&&(this.entertainmentState=!0,this.tvLine=n[0]),""==this.movilLine&&this.next()},s=>{console.log(s)})}next(){let t={},e={},n={},s={};""!=this.movilLine&&(t={movil:[this.movilLine]}),""!=this.wanLine&&(e={ifixed:[this.wanLine]}),""!=this.tvLine&&(n={tv:[this.tvLine]}),s=Object.assign(t,e,n);let r=JSON.stringify({data:{transactionId:this.numberList.data.transactionId,data:s}});this.webstoreService.saveMovilListinformation(r),this.visited=!0,this.registerAactivation(s),this.nextMovilListStep.emit(!0)}radioChange(t){var e=t.source.value;const n=this.numberList.data.data.movil;this.linesList=[],this.movilLine=t.source.value;for(let s=0;s<this.limitLine;s++)this.linesList.push(e==n[s]?{id:s.toString(),name:n[s],value:n[s],description:"alert alert-info divOption",style:"background-color: #AC99CE; color: white; border: 2px solid #5C349D; border-radius:15px;",checked:!0}:{id:s.toString(),name:n[s],value:n[s],description:"alert alert-secondary divOption",style:"background-color: #F1F1F1; color: black; border-radius:15px;",checked:!1})}clickme(){this.limitLine=10,this.linesList=[];const t=this.numberList.data.data.movil;if(t.length>0){this.movilState=!0,this.listagroup.push("movil_control");for(let e=0;e<t.length;e++)e<this.limitLine&&this.linesList.push(0==e?{id:e.toString(),name:t[e],value:t[e],description:"alert alert-info divOption",style:"background-color: #AC99CE; color: white; border: 2px solid #5C349D; border-radius:15px;",checked:!0}:{id:e.toString(),name:t[e],value:t[e],description:"alert alert-secondary divOption",style:"background-color: #F1F1F1; color: black; border-radius:15px;",checked:!1})}}registerAactivation(t){if(console.log(t),!t)return;const e=this.webstoreService.getDataInSession("addressData");let n,s=0;e&&e.forEach(x=>{x.selected&&(n=x),s=n?.addressId});let r=[];t.movil&&t.movil.length>0&&r.push({planType:"MOVIL",serviceIdentifier:t.movil[0]}),t.ifixed&&t.ifixed.length>0&&r.push({planType:"IFIXED",serviceIdentifier:t.ifixed[0],address:{addressId:s,addressTypeCode:"INS_ADDR"}}),t.tv&&t.tv.length>0&&r.push({planType:"TV",serviceIdentifier:t.tv[0]});const A={orderId:this.webstoreService.getDataInSession("orderMainId"),sequence:5,userId:this.webstoreService.getDataInSession("userId"),microFrontendId:"activation-data-microfront-app",microFrontendData:JSON.stringify(r),statusCode:"INI"};this.ordersService.registerOrderView(A,this.webstoreService.getDataInSession("token")).subscribe(x=>{console.log(x)})}}return a.\u0275fac=function(t){return new(t||a)(i.Y36(b),i.Y36(y.f),i.Y36(I.N),i.Y36(c.qu),i.Y36(f.t2))},a.\u0275cmp=i.Xpm({type:a,selectors:[["app-movil-list"]],outputs:{nextMovilListStep:"nextMovilListStep"},decls:2,vars:2,consts:[["class","container",4,"ngIf"],["bdColor","rgba(51, 51, 51, 0.8)","size","large","color","#D6F084","type","ball-8bits",3,"fullScreen"],[1,"container"],[1,"row","pb-3"],[1,"section-body","col-12","py-3"],["novalidate","","id","validationForm",1,"form",2,"background-color","white"],[1,"row"],["class","col-6 col-md-6 col-sm-6",4,"ngFor","ngForOf"],["class","col-6 col-md-6 col-sm-6",4,"ngIf"],[1,"text-center"],[3,"content","click"],[1,"col-6","col-md-6","col-sm-6"],["role","alert"],["name","movil",3,"value","checked","change"],["role","alert",1,"alert","alert-light","divOption",2,"text-align","center"],["href","javascript: void(0);",1,"linkMore",3,"click"]],template:function(t,e){1&t&&(i.YNc(0,p,16,5,"div",0),i._UZ(1,"ngx-spinner",1)),2&t&&(i.Q6J("ngIf",e.movilState),i.xp6(1),i.Q6J("fullScreen",!1))},dependencies:[g.sg,g.O5,c._Y,c.JL,c.F,L.a8,L.dn,O.U0,F.r,f.Ro],styles:["mat-card-header[_ngcontent-%COMP%]   .title-1[_ngcontent-%COMP%]{font-size:2.5vh;text-align:left;color:purple;font-family:MUSEO900-REGULAR;margin:0}mat-card-header[_ngcontent-%COMP%]   .title-2[_ngcontent-%COMP%]{font-size:1.8vh;text-align:left;color:#000;font-family:MUSEO600-REGULAR}mat-card-title[_ngcontent-%COMP%]{margin-bottom:.5vh}.mat-icon-button[_ngcontent-%COMP%]{width:4vh!important;height:auto!important;margin-top:-6px;margin-right:-3px}mat-card-content[_ngcontent-%COMP%]{background:#F0F0F0;color:purple;border-radius:0 0 25px 25px}.link-back[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:right;font-weight:700;text-decoration:none;color:#b302a7}.mat-card[_ngcontent-%COMP%]{padding:10px!important;width:100%;color:#7b7b7b}.section-body[_ngcontent-%COMP%]{background:white}mat-form-field[_ngcontent-%COMP%]{width:100%}.divOption[_ngcontent-%COMP%]{margin:5px}.linkMore[_ngcontent-%COMP%]{text-align:right;font-weight:700;text-decoration:none;color:#00008b}  .mat-radio-button.mat-accent .mat-radio-ripple .mat-ripple-element{background-color:#fff!important;border-color:#fff!important;border-radius:8px}  .mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#5c339d!important;border-color:#fff!important;border-radius:8px}  .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{background-color:#fff!important;border-color:#fff!important;border-radius:8px}"]}),a})()},5380:(T,u,o)=>{o.r(u),o.d(u,{MovilListModule:()=>F});var i=o(6895),v=o(3060),M=o(5428),h=o(4650);const C=[{path:"",component:M.h}];let S=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275mod=h.oAB({type:l}),l.\u0275inj=h.cJS({imports:[v.Bz.forChild(C),v.Bz]}),l})();var b=o(3720),y=o(1948),I=o(4859),c=o(4006),f=o(3546),g=o(4466),L=o(9336),O=o(8423);let F=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275mod=h.oAB({type:l}),l.\u0275inj=h.cJS({imports:[i.ez,S,b.O,c.u5,c.UX,f.QW,I.ot,y.Fk,g.m,L.zB,O.ef]}),l})()}}]);
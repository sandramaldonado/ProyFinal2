"use strict";(self.webpackChunklanding_master_sales_frontend=self.webpackChunklanding_master_sales_frontend||[]).push([[605],{3861:(I,P,m)=>{m.d(P,{A:()=>v});var S=m(655),e=m(4650),x=m(6748),C=m(5219),w=m(9886),F=m(5861),g=(()=>{return(t=g||(g={}))[t.Up=1]="Up",t[t.Down=3]="Down",t[t.Right=6]="Right",t[t.Left=8]="Left",t[t.UpMirrored=2]="UpMirrored",t[t.DownMirrored=4]="DownMirrored",t[t.LeftMirrored=5]="LeftMirrored",t[t.RightMirrored=7]="RightMirrored",t[t.Default=0]="Default",t[t.NotJpeg=-1]="NotJpeg",t[t.NotDefined=-2]="NotDefined",g;var t})();class l{}l.getOrientation=t=>new Promise((i,o)=>{try{const s=new FileReader;s.onload=()=>{const r=new DataView(s.result);if(!r.byteLength||65496!==r.getUint16(0,!1))return i(g.NotDefined);const a=r.byteLength;let n=2;for(;n<a;){const d=r.getUint16(n,!1);if(n+=2,65505===d){if(1165519206!==r.getUint32(n+=2,!1))return i(g.NotJpeg);const f=18761===r.getUint16(n+=6,!1);n+=r.getUint32(n+4,f);const p=r.getUint16(n,f);n+=2;for(let c=0;c<p;c++)if(274===r.getUint16(n+12*c,f))return i(r.getUint16(n+12*c+8,f))}else{if(65280!=(65280&d))break;n+=r.getUint16(n,!1)}}return i(g.NotJpeg)},s.readAsArrayBuffer(t)}catch{return o(g.Default)}}),l.uploadFile=(t,i=!0,o=!1)=>new Promise(function(s,r){const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);Promise.resolve(a).then(n=>n?l.generateUploadInputNative(window.document,i,o):l.generateUploadInputRenderer(t,i,o)).then(n=>{const d=n?Array.from(n):[],f=d.map(u=>l.getOrientation(u)),p=d.map(u=>l.fileToDataURL(u));let c=[];Promise.all(f).then(u=>(c=u,Promise.all(p))).then(u=>{const b=u.map((D,_)=>({image:D.dataUrl,orientation:c[_],fileName:D.fileName}));s(i?b:b[0])})}).catch(n=>r(n))}),l.fileToDataURL=t=>new Promise((i,o)=>{const s=new FileReader;s.onload=r=>{i({dataUrl:r.target.result,fileName:t.name})};try{s.readAsDataURL(t)}catch(r){o(`ngx-image-compress - probably no file have been selected: ${r}`)}}),l.generateUploadInputRenderer=(t,i=!0,o=!1)=>{let s=!1;return new Promise((r,a)=>{const n=t.createElement("input");t.setStyle(n,"display","none"),t.setProperty(n,"type","file"),t.setProperty(n,"accept","image/*"),i&&t.setProperty(n,"multiple","true"),t.listen(n,"click",d=>{d.target.value=""}),t.listen(n,"change",d=>{s=!0,r(d.target.files)}),o&&window.addEventListener("focus",()=>{setTimeout(()=>{s||a(new Error("file upload on blur - no file selected"))},300)},{once:!0}),n.click()})},l.generateUploadInputNative=(t,i=!0,o=!1)=>{let s=!1;return new Promise((r,a)=>{const n=t.createElement("input");n.id="upload-input"+new Date,n.style.display="none",n.setAttribute("type","file"),i&&n.setAttribute("multiple","true"),t.body.appendChild(n),n.addEventListener("change",()=>{s=!0,r(n.files),t.body.removeChild(t.getElementById(n.id))},{once:!0}),o&&window.addEventListener("focus",()=>{setTimeout(()=>{!s&&t.getElementById(n.id)&&(a(new Error("file upload on blur - no file selected")),t.body.removeChild(t.getElementById(n.id)))},300)},{once:!0}),n.click()})},l.compress=(t,i,o,s=50,r=50,a=0,n=0)=>new Promise(function(d,f){r/=100,s/=100;const p=new Image;p.onload=()=>{const c=o.createElement("canvas"),u=c.getContext("2d");if(!u)return f("No canvas context available");let b=p.naturalWidth,D=p.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(i===g.Right||i===g.Left)){const E=b;b=D,D=E}s=Math.min(s,a?a/b:1,n?n/D:1),c.width=b*s,c.height=D*s;const k=Math.PI/180;CSS.supports("image-orientation","from-image")||i===g.Up?u.drawImage(p,0,0,c.width,c.height):i===g.Right?(u.save(),u.rotate(90*k),u.translate(0,-c.width),u.drawImage(p,0,0,c.height,c.width),u.restore()):i===g.Left?(u.save(),u.rotate(-90*k),u.translate(-c.width,0),u.drawImage(p,0,0,c.height,c.width),u.restore()):i===g.Down?(u.save(),u.rotate(180*k),u.translate(-c.width,-c.height),u.drawImage(p,0,0,c.width,c.height),u.restore()):u.drawImage(p,0,0,c.width,c.height);const W=t.substr(5,t.split(";")[0].length-5),j=c.toDataURL(W,r);d(j)},p.onerror=c=>f(c),p.src=t}),l.byteCount=t=>encodeURI(t).split(/%..|./).length-1,l.getImageMaxSize=function(){var t=(0,F.Z)(function*(i,o,s){const a=f=>(f/1024/1024).toFixed(2);o&&console.debug("NgxImageCompress - Opening upload window");let d,n=yield l.uploadFile(s,!1);for(let f=0;f<10;f++){const p=l.byteCount(n.image);d=yield l.compress(n.image,n.orientation,s,50,100);const c=l.byteCount(d);if(console.debug("NgxImageCompress -","Compression from",a(p),"MB to",a(c),"MB"),c>=p)throw 0===f?(o&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",a(p),"MB large"),n.image):(o&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",a(p),"MB large"),n.image);if(c<1024*i*1024)return o&&console.debug("NgxImageCompress -","Here your file",a(c),"MB large"),d;if(9===f)throw o&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",a(p),"MB large"),n.image;o&&console.debug("NgxImageCompress -","Reached",a(c),"MB large. Trying another time after",f+1,"times"),n.image=d}throw o&&console.debug("NgxImageCompress - Unexpected error"),""});return function(i,o,s){return t.apply(this,arguments)}}();let U=(()=>{class t{constructor(o){this.DOC_ORIENTATION=g,this.render=o.createRenderer(null,null)}byteCount(o){return l.byteCount(o)}getOrientation(o){return l.getOrientation(o)}uploadFile(){return l.uploadFile(this.render,!1)}uploadMultipleFiles(){return l.uploadFile(this.render,!0)}uploadFileOrReject(){return l.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return l.uploadFile(this.render,!0,!0)}compressFile(o,s,r=50,a=50,n=0,d=0){return l.compress(o,s,this.render,r,a,n,d)}uploadAndGetImageWithMaxSize(o=1,s=!1){return l.getImageMaxSize(o,s,this.render)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(e.FYo))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var J=m(3063),h=m(6895),y=m(3546),Z=m(4859),Q=m(7392),T=m(42),L=m(9717);function B(t,i){1&t&&e._UZ(0,"img",12)}function R(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",13),e._UZ(1,"img",14),e.TgZ(2,"button",15),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.removeFirstDocument())}),e.TgZ(3,"mat-icon"),e._uU(4,"delete_outline"),e.qZA()()()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("src",o.firstDocument,e.LSH)}}function V(t,i){1&t&&e._UZ(0,"img",12)}function z(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",13)(1,"div",16),e._uU(2,"Vista Previa"),e.qZA(),e._UZ(3,"img",14),e.TgZ(4,"button",15),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.removeSecondDocument())}),e.TgZ(5,"mat-icon"),e._uU(6,"delete_outline"),e.qZA()()()}if(2&t){const o=e.oxw();e.xp6(3),e.Q6J("src",o.secondDocument,e.LSH)}}function A(t,i){1&t&&e._UZ(0,"img",12)}function Y(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",13)(1,"div",16),e._uU(2,"Vista Previa"),e.qZA(),e._UZ(3,"img",14),e.TgZ(4,"button",17),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.removeFacePicture())}),e.TgZ(5,"mat-icon"),e._uU(6,"delete_outline"),e.qZA()()()}if(2&t){const o=e.oxw();e.xp6(3),e.Q6J("src",o.facePicture,e.LSH)}}function H(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"app-button",18),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.next())}),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("disabled",!o.firstDocumentIsValid||!o.firstDocumentIsValid||!o.facePictureIsValid)("content","Siguiente")}}class v{constructor(i,o,s){this.modalService=i,this.imageCompress=o,this.webstoreService=s,this.nextDocumentStep=new e.vpe,this.visited=!1,this.firstDocumentIsValid=!1,this.secondDocumentIsValid=!1,this.facePictureIsValid=!1}ngOnInit(){}openModalWithComponent(){}uploadFirstDocument(){this.uploadAndCompress("firstDocument"),this.firstDocumentIsValid=!0}takePictureFirstDocument(){this.bsModalRef=this.modalService.show(x.Q,{initialState:{source:"firstDocument"}}),this.bsModalRef.content.closeBtnName="Close"}uploadSecondDocument(){this.secondDocumentIsValid=!0,this.uploadAndCompress("secondDocument")}takePictureSecondDocument(){this.bsModalRef=this.modalService.show(x.Q,{initialState:{source:"secondDocument"}}),this.bsModalRef.content.closeBtnName="Close"}uploadFacePicture(){this.facePictureIsValid=!0,this.uploadAndCompress("facePicture")}takeFacePicture(){this.bsModalRef=this.modalService.show(x.Q,{initialState:{source:"facePicture"}}),this.bsModalRef.content.closeBtnName="Close"}uploadAndCompress(i){let o=this;this.imageCompress.uploadFile().then(({image:s,orientation:r})=>{let a=this.imageCompress.byteCount(s);if(a>4e5){console.log("Size in bytes was:",this.imageCompress.byteCount(s));let n=100;n=a<=5e5?80:a<1e6?70:a<2e6?60:a<5e6?40:a<7e6?30:a<1e7?20:10,this.imageCompress.compressFile(s,r,n,90).then(d=>{o.webstoreService.saveDocument(i,d),console.log("(>400000)Size in bytes is now:",this.imageCompress.byteCount(d))})}else this.imageCompress.compressFile(s,r,90,90).then(n=>{o.webstoreService.saveDocument(i,n),console.log("(<400000)Size in bytes after compression is now:",this.imageCompress.byteCount(n))})}).catch(s=>{})}removeFirstDocument(){this.firstDocumentIsValid=!1,this.webstoreService.saveDocument("firstDocument","")}removeSecondDocument(){this.secondDocumentIsValid=!1,this.webstoreService.saveDocument("secondDocument","")}removeFacePicture(){this.facePictureIsValid=!1,this.webstoreService.saveDocument("facePicture","")}validateDocuments(){let i=!1;return i=""!=this.firstDocument&&""!=this.secondDocument&&""!=this.facePicture,i}next(){this.visited=!0,this.nextDocumentStep.emit(!0)}}v.\u0275fac=function(i){return new(i||v)(e.Y36(w.tT),e.Y36(U),e.Y36(J.f))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-documents"]],outputs:{nextDocumentStep:"nextDocumentStep"},decls:36,vars:13,consts:[[1,"container"],[1,"row","pb-3"],[1,"section-body","col-12","py-3"],[1,"d-flex","flex-column","justify-content-around","align-items-center"],[1,"my-3","border"],[1,"text-center"],[1,"d-flex","flex-column","justify-content-between","align-items-center","py-5"],["src","assets/images/iconos/picture.png","alt","","class","pb-2",4,"ngIf"],["class"," border rounded mt-2 mt-lg-0 p-2","style","background-color: white; position: relative;",4,"ngIf"],[3,"content","click"],["class","border rounded mt-2 mt-lg-0 p-2","style","background-color: white; position: relative;",4,"ngIf"],[3,"disabled","content","click",4,"ngIf"],["src","assets/images/iconos/picture.png","alt","",1,"pb-2"],[1,"border","rounded","mt-2","mt-lg-0","p-2",2,"background-color","white","position","relative"],[1,"",2,"min-height","200px","width","270px","height","auto",3,"src"],["mat-fab","","color","primary",1,"btn-remove",2,"position","absolute","top","10px","right","0",3,"click"],[1,"snapshot-title","text-center"],["mat-fab","","color","primary",2,"position","absolute","top","10px","right","0",3,"click"],[3,"disabled","content","click"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"section",2)(3,"div",3)(4,"h3"),e._uU(5,"Documentos de identidad"),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Necesitamos verificar tu identidad con tus documentos legales."),e.qZA(),e.TgZ(8,"mat-card",4)(9,"mat-card-content",5)(10,"div",6),e.YNc(11,B,1,0,"img",7),e.YNc(12,R,5,1,"div",8),e.TgZ(13,"p"),e._uU(14,"Sube la fotograf\xeda de CI (anverso) "),e.qZA(),e.TgZ(15,"app-button",9),e.NdJ("click",function(){return o.uploadFirstDocument()}),e.qZA(),e.TgZ(16,"app-button-outline",9),e.NdJ("click",function(){return o.takePictureFirstDocument()}),e.qZA()()()(),e.TgZ(17,"mat-card",4)(18,"mat-card-content",5)(19,"div",6),e.YNc(20,V,1,0,"img",7),e.YNc(21,z,7,1,"div",10),e.TgZ(22,"p"),e._uU(23,"Sube la fotograf\xeda de CI (reverso)"),e.qZA(),e.TgZ(24,"app-button",9),e.NdJ("click",function(){return o.uploadSecondDocument()}),e.qZA(),e.TgZ(25,"app-button-outline",9),e.NdJ("click",function(){return o.takePictureSecondDocument()}),e.qZA()()()(),e.TgZ(26,"mat-card",4)(27,"mat-card-content",5)(28,"div",6),e.YNc(29,A,1,0,"img",7),e.YNc(30,Y,7,1,"div",10),e.TgZ(31,"p"),e._uU(32,"Sube la fotograf\xeda de ti sin gorra o algo q tape tu rostro"),e.qZA(),e.TgZ(33,"app-button",9),e.NdJ("click",function(){return o.uploadFacePicture()}),e.qZA(),e.TgZ(34,"app-button-outline",9),e.NdJ("click",function(){return o.takeFacePicture()}),e.qZA()()()(),e.YNc(35,H,1,2,"app-button",11),e.qZA()()()()),2&i&&(e.xp6(11),e.Q6J("ngIf",!o.firstDocument||""==o.firstDocument),e.xp6(1),e.Q6J("ngIf",o.firstDocument&&""!=o.firstDocument),e.xp6(3),e.Q6J("content","Subir imagen"),e.xp6(1),e.Q6J("content","Tomar fotografia"),e.xp6(4),e.Q6J("ngIf",!o.secondDocument||""==o.secondDocument),e.xp6(1),e.Q6J("ngIf",o.secondDocument&&""!=o.secondDocument),e.xp6(3),e.Q6J("content","Subir imagen"),e.xp6(1),e.Q6J("content","Tomar fotografia"),e.xp6(4),e.Q6J("ngIf",!o.facePicture||""==o.facePicture),e.xp6(1),e.Q6J("ngIf",o.facePicture&&""!=o.facePicture),e.xp6(3),e.Q6J("content","Subir imagen"),e.xp6(1),e.Q6J("content","Tomar fotografia"),e.xp6(1),e.Q6J("ngIf",!o.visited))},dependencies:[h.O5,y.a8,y.dn,Z.lW,Q.Hw,T.r,L.Y],styles:[".mat-card[_ngcontent-%COMP%]{padding:1px!important;width:100%;color:#7b7b7b}.section-body[_ngcontent-%COMP%]{background:white;color:#848484}"]}),(0,S.gn)([(0,C.xg)("firstDocument")],v.prototype,"firstDocument",void 0),(0,S.gn)([(0,C.xg)("secondDocument")],v.prototype,"secondDocument",void 0),(0,S.gn)([(0,C.xg)("facePicture")],v.prototype,"facePicture",void 0)},605:(I,P,m)=>{m.r(P),m.d(P,{DocumentsModule:()=>J});var S=m(6895),e=m(3546),x=m(3060),C=m(3861),w=m(4650);const F=[{path:"",component:C.A}];let g=(()=>{class h{}return h.\u0275fac=function(Z){return new(Z||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({imports:[x.Bz.forChild(F),x.Bz]}),h})();var M=m(4859),l=m(7392),U=m(4466);let J=(()=>{class h{}return h.\u0275fac=function(Z){return new(Z||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({imports:[S.ez,g,e.QW,M.ot,l.Ps,U.m]}),h})()}}]);